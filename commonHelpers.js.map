{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/izi-messages.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function searchingRequest(params) {\n  const response = await axios.get(`https://pixabay.com/api/?${params}`)\n  return response.data\n}\n","const imagesList = document.querySelector('.images-list');\nexport function renderImages(imagesData) {\n  const markUp = imagesData.hits\n    .map(image => {\n      return `\n        <li class=\"images-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=360 height=202>\n            </a>\n\n            <div class=\"images-titels\">\n                <p><b>Likes</b> ${image.likes}</p>\n                <p><b>Views</b> ${image.views}</p>\n                <p><b>Comments</b> ${image.comments}</p>\n                <p><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </li>\n        `;\n    })\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', markUp);\n}\n","export const iziToastError = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  color: 'red',\n  position: 'center',\n  progressBar: false,\n};\n\nexport const iziToastWarning = {\n  message: 'Please fill the search field',\n  color: 'yellow',\n  position: 'center',\n  progressBar: false,\n};\n\nexport const iziToastInfo = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  color: 'blue',\n  position: 'bottomCenter',\n  progressBar: false,\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchingRequest } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport {\n  iziToastError,\n  iziToastWarning,\n  iziToastInfo,\n} from './js/izi-messages';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst imagesList = document.querySelector('.images-list');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst lightbox = new SimpleLightbox('.images-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchParam = {\n  key: '45237174-16156409efac0dde2d7dc0545',\n  q: null,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 15,\n};\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  loadMoreBtn.style.visibility = 'hidden';\n  const searchQuary = event.target.elements.search_key.value.trim();\n\n  if (searchParam.q !== searchQuary) {\n    searchParam.q = searchQuary;\n    searchParam.page = 1;\n    imagesList.innerHTML = '';\n  }\n\n  event.target.elements.search_key.value = '';\n\n  if (!searchParam.q) {\n    iziToast.warning(iziToastWarning);\n    return;\n  }\n  \n  loader.style.display = 'block';\n\n  await searchingRequest(new URLSearchParams(searchParam))\n    .then(imagesData => {\n      if (imagesData.total === 0) {\n        iziToast.error(iziToastError);\n        loader.style.display = 'none';\n        return;\n      }\n\n      renderImages(imagesData);\n\n      loadMoreBtn.style.visibility = 'visible';\n      loader.style.display = 'none';\n\n      lightbox.on('show.simplelightbox', function () {});\n      lightbox.refresh();\n    })\n    .catch(error => console.log(error));\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  searchParam.page += 1;\n  loadMoreBtn.style.visibility = 'hidden';\n  loader.style.display = 'block';\n\n  await searchingRequest(new URLSearchParams(searchParam))\n    .then(imagesData => {\n      renderImages(imagesData);\n\n      const imageCard = document.querySelector('.images-item');\n      const cardSize = imageCard.getBoundingClientRect();\n      window.scrollBy(0, cardSize.height * 2);\n\n      loader.style.display = 'none';\n\n      if (searchParam.page * searchParam.per_page > imagesData.totalHits) {\n        iziToast.info(iziToastInfo);\n        loader.style.display = 'none';\n        return;\n      }\n\n      loadMoreBtn.style.visibility = 'visible';\n\n      lightbox.on('show.simplelightbox', function () {});\n      lightbox.refresh();\n    })\n    .catch(error => console.log(error));\n});\n"],"names":["searchingRequest","params","axios","imagesList","renderImages","imagesData","markUp","image","iziToastError","iziToastWarning","iziToastInfo","form","loader","loadMoreBtn","lightbox","SimpleLightbox","searchParam","event","searchQuary","iziToast","error","cardSize"],"mappings":"owBAEO,eAAeA,EAAiBC,EAAQ,CAE7C,OADiB,MAAMC,EAAM,IAAI,4BAA4BD,CAAM,EAAE,GACrD,IAClB,CCLA,MAAME,EAAa,SAAS,cAAc,cAAc,EACjD,SAASC,EAAaC,EAAY,CACvC,MAAMC,EAASD,EAAW,KACvB,IAAIE,GACI;AAAA;AAAA,uBAEUA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,kCAIhCA,EAAM,KAAK;AAAA,kCACXA,EAAM,KAAK;AAAA,qCACRA,EAAM,QAAQ;AAAA,sCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,SAIhD,EACA,KAAK,EAAE,EACVJ,EAAW,mBAAmB,YAAaG,CAAM,CACnD,CCrBO,MAAME,EAAgB,CAC3B,QACE,2EACF,MAAO,MACP,SAAU,SACV,YAAa,EACf,EAEaC,EAAkB,CAC7B,QAAS,+BACT,MAAO,SACP,SAAU,SACV,YAAa,EACf,EAEaC,EAAe,CAC1B,QAAS,6DACT,MAAO,OACP,SAAU,eACV,YAAa,EACf,ECRMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCT,EAAa,SAAS,cAAc,cAAc,EAClDU,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAW,IAAIC,EAAe,iBAAkB,CACpD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAc,CAChB,IAAK,qCACL,EAAG,KACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAU,EACZ,EAEAL,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAC7CA,EAAM,eAAc,EACpBJ,EAAY,MAAM,WAAa,SAC/B,MAAMK,EAAcD,EAAM,OAAO,SAAS,WAAW,MAAM,OAU3D,GARID,EAAY,IAAME,IACpBF,EAAY,EAAIE,EAChBF,EAAY,KAAO,EACnBb,EAAW,UAAY,IAGzBc,EAAM,OAAO,SAAS,WAAW,MAAQ,GAErC,CAACD,EAAY,EAAG,CAClBG,EAAS,QAAQV,CAAe,EAChC,MACD,CAEDG,EAAO,MAAM,QAAU,QAEvB,MAAMZ,EAAiB,IAAI,gBAAgBgB,CAAW,CAAC,EACpD,KAAKX,GAAc,CAClB,GAAIA,EAAW,QAAU,EAAG,CAC1Bc,EAAS,MAAMX,CAAa,EAC5BI,EAAO,MAAM,QAAU,OACvB,MACD,CAEDR,EAAaC,CAAU,EAEvBQ,EAAY,MAAM,WAAa,UAC/BD,EAAO,MAAM,QAAU,OAEvBE,EAAS,GAAG,sBAAuB,UAAY,CAAE,CAAA,EACjDA,EAAS,QAAO,CACtB,CAAK,EACA,MAAMM,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAAC,EAEDP,EAAY,iBAAiB,QAAS,SAAY,CAChDG,EAAY,MAAQ,EACpBH,EAAY,MAAM,WAAa,SAC/BD,EAAO,MAAM,QAAU,QAEvB,MAAMZ,EAAiB,IAAI,gBAAgBgB,CAAW,CAAC,EACpD,KAAKX,GAAc,CAClBD,EAAaC,CAAU,EAGvB,MAAMgB,EADY,SAAS,cAAc,cAAc,EAC5B,wBAK3B,GAJA,OAAO,SAAS,EAAGA,EAAS,OAAS,CAAC,EAEtCT,EAAO,MAAM,QAAU,OAEnBI,EAAY,KAAOA,EAAY,SAAWX,EAAW,UAAW,CAClEc,EAAS,KAAKT,CAAY,EAC1BE,EAAO,MAAM,QAAU,OACvB,MACD,CAEDC,EAAY,MAAM,WAAa,UAE/BC,EAAS,GAAG,sBAAuB,UAAY,CAAE,CAAA,EACjDA,EAAS,QAAO,CACtB,CAAK,EACA,MAAMM,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAAC"}